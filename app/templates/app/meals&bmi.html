{% extends "app/layout.html" %}

{% block body %}
<div class="container" style="font-family: URW Chancery L, cursive;">
    <div class="main-body">
      <div class="row gutters-sm">
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img src="{{ user.image_url }}" alt="Couldn't load..." class="rounded-circle" width="150">
                <div class="mt-3">
                    <h4>
                        {% if user.first_name and user.last_name %}
                        {{ user.first_name }} {{ user.last_name }}
                        {% else %}
                        {{ user.username }}
                        {% endif %}
                    </h4>
                    <a class="btn btn-primary" href="{% url 'index' %}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Back to Home Page" style="width: 200px; margin: 1px;">
                        <i class="fa fa-chevron-left" aria-hidden="true"></i> Back to Home Page
                    </a>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="card mt-3">
            <div class="card-body">
                <h5>Daily Intake</h5>
                <h6>Calories - {{ total_calories }}</h6>
                <hr>
                <h6>Fat - {{ total_fat }}</h6>
                <hr>
                <h6>Protein - {{ total_protein }}</h6>
                <hr>
                <h6>Carbs - {{ total_carbs }}</h6>
            </div>
          </div> -->
        </div>

        <div class="col-md-8">
            <div class="card mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <h4 class="mb-0">Daily Intake</h4>
                        </div>
                        <a class="btn btn-warning" href="#" style="width: 200px; margin: 1px;">
                            <i class="fa fa-cutlery" aria-hidden="true"></i> Add Meal
                        </a>
                    </div>
                    <hr>
                    {% for meal in meals %}
                        <div class="row p-1">
                            <div class="col-sm-3">
                                {% if meal.fat > 100.00 or meal.calories > 100.00 or meal.carbs > 100.00 or meal.protein > 100.00 %}
                                    <h6 class="mb-0" style="color: red;">
                                        {{ meal.name }}
                                    </h6>
                                {% elif 100.00 >= meal.fat and meal.fat >= 50.00 or 100.00 >= meal.calories and meal.calories >= 50.00 or 100.00 >= meal.carbs and meal.carbs >= 50.00 or 100.00 >= meal.protein and meal.protein >= 50.00 %}
                                    <h6 class="mb-0" style="color: yellow;">
                                        {{ meal.name }}
                                    </h6>
                                {% elif meal.fat < 50.00 or meal.calories < 50.00 or meal.carbs < 50.00 or meal.protein < 50.00 %}
                                    <h6 class="mb-0" style="color: green;">
                                        {{ meal.name }}
                                    </h6>
                                {% endif %}
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <div class="row">
                                    {{ meal.fat }}g Fat&emsp;|&emsp;{{ meal.calories }}g Calories&emsp;|&emsp;{{ meal.carbs }}g Carbs&emsp;|&emsp;{{ meal.protein }}g Protein
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <h4 class="text-center">No meals yet...</h4>
                    {% endfor %}
                    <hr>
                    <div class="row">
                        <div class="col-sm-3">
                            <h6 class="mb-0"><b>Summary</b></h6>
                        </div>
                        <div class="col-sm-9 text-secondary">
                            <div class="row">
                                {{ total_fat }}g Fat&emsp;|&emsp;{{ total_calories }}g Calories&emsp;|&emsp;{{ total_carbs }}g Carbs&emsp;|&emsp;{{ total_protein }}g Protein
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <h4 class="mb-0">BMI Results</h4>
                        </div>
                        <a class="btn btn-success" href="#" style="width: 200px; margin: 1px;">
                            <i class="fa fa-calculator"></i> Calculate BMI
                        </a>
                    </div>
                    <hr>
                    {% for bmi in bmis %}
                        <div class="row">
                            <div class="col-sm-3">
                                {% if bmi.result > 30.0 %}
                                    <h6 class="mb-0" style="color: red;">
                                        Overweight
                                    </h6>
                                {% elif bmi.result > 25.0 %}
                                    <h6 class="mb-0" style="color: yellow;">
                                        Healthy weight
                                    </h6>
                                {% elif 25.0 >= bmi.result and bmi.result >= 18.5 %}
                                    <h6 class="mb-0" style="color: green;">
                                        Healthy weight
                                    </h6>
                                {% elif 18.5 > bmi.result %}
                                    <h6 class="mb-0" style="color: yellow;">
                                        Underweight
                                    </h6>
                                {% elif 15.0 > bmi.result %}
                                    <h6 class="mb-0" style="color: red;">
                                        Underweight
                                    </h6>
                                {% endif %}
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <div class="row">
                                    {{ bmi.height }} cm&emsp;|&emsp;{{ bmi.weight }} kg&emsp;|&emsp;{{ bmi.result }} BMI&emsp;|&emsp;{{ bmi.created_at }}
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <h4 class="text-center">No calculations yet...</h4>
                    {% endfor %}
                    <hr>
                    <div class="row">
                        <div class="col-sm-3">
                            <h6 class="mb-0"><b>Average Results</b></h6>
                        </div>
                        <div class="col-sm-9 text-secondary">
                            <div class="row">
                                {{ average_height }} cm&emsp;|&emsp;{{ average_weight }} kg&emsp;|&emsp;{{ average_result }} BMI
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}